(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bd8b39b"],{3835:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("277d");function n(e){if(Array.isArray(e))return e}i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0");function a(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(i.push(r.value),t&&i.length===t)break}catch(l){a=!0,o=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(a)throw o}}return i}}var o=i("06c5");function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return n(e)||a(e,t)||Object(o["a"])(e,t)||r()}},4292:function(e,t,i){},"80cd":function(e,t,i){"use strict";var n=i("4292"),a=i.n(n);a.a},"87a0":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cl-upload__wrap"},[e.isSpace?i("cl-upload-space",{ref:"space",attrs:{accept:e.accept,limit:e.limit},on:{confirm:e.onSpaceConfirm}},[e._t("default")],2):i("div",{staticClass:"cl-upload",class:["cl-upload--"+e.listType,{"is-multiple":e.multiple}]},[i("el-input",{staticClass:"cl-upload__hidden",attrs:{type:"hidden"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e._loading,expression:"_loading"}],style:e._style,attrs:{action:"",accept:e._accept,multiple:e.multiple,limit:e.limit,data:e.data,name:e.name,drag:e.drag,"list-type":e.listType,"file-list":e.fileList,"show-file-list":e._showFileList,"auto-upload":e.autoUpload,disabled:e.disabled,headers:Object.assign({},{Authorization:e.token},e.headers),"http-request":function(t){e.httpRequest(t)},"on-remove":e._onRemove,"on-preview":e.onPreview,"on-success":e.onSuccess,"on-error":e.onError,"on-progress":e.onProgress,"on-change":e.onChange,"on-exceed":e.onExceed,"before-upload":e.beforeUpload,"before-remove":e.beforeRemove}},[e._t("default",["picture-card"==e.listType?[i("i",{class:["cl-upload__icon",e.icon]}),e.text?i("span",{staticClass:"cl-upload__text"},[e._v(e._s(e.text))]):e._e()]:"file"==e.listType?[i("el-button",{attrs:{size:"mini",type:"primary",loading:e.loading}},[e._v("点击上传")])]:[e._urls[0]?i("div",{staticClass:"cl-upload__cover"},["image"==e._urls[0].type?i("img",{attrs:{src:e._urls[0].url}}):i("span",[e._v(e._s(e._urls[0].name))])]):[i("i",{class:["cl-upload__icon",e.icon]}),e.text?i("span",{staticClass:"cl-upload__text"},[e._v(e._s(e.text))]):e._e()]]])],2)],1)],1)},a=[],o=(i("4de4"),i("caad"),i("a15b"),i("d81d"),i("b0c0"),i("a9e3"),i("ac1f"),i("2532"),i("1276"),i("3835")),r=i("5530"),s=i("2f62"),l=i("2ef0"),u=i.n(l),c={props:{value:[Array,String],size:{type:[Array,String,Number],default:"128px"},icon:{type:String,default:"el-icon-upload"},text:{type:String,default:"选择文件"},accept:String,multiple:Boolean,limit:Number,data:Object,isSpace:Boolean,name:{type:String,default:"file"},drag:Boolean,listType:{type:String,default:"default"},showFileList:Boolean,autoUpload:{type:Boolean,default:!0},disabled:Boolean,headers:Object,onRemove:Function,onPreview:Function,onSuccess:Function,onError:Function,onProgress:Function,onChange:Function,onExceed:Function,beforeUpload:Function,beforeRemove:Function},data:function(){return{fileList:[],urls:[],loading:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(s["b"])(["token"])),{},{_showFileList:function(){switch(this.listType){case"picture-card":case"file":return!0;default:return!1}},_accept:function(){switch(this.listType){case"picture-card":return"image/*";default:return"*"}},_loading:function(){return"default"==this.listType&&this.loading},_urls:function(){var e={image:["bmp","jpg","png","tif","gif","svg"]};return this.urls.map((function(t){var i=t.url.split("."),n=u.a.last(i);return t.type=(e.image.includes(n),"image"),t}))},_style:function(){var e=[];e=u.a.isArray(this.size)?this.size:[this.size,this.size];var t=e.map((function(e){return u.a.isNumber(e)?"".concat(e,"px"):e})),i=Object(o["a"])(t,2),n=i[0],a=i[1];return"default"==this.listType?{height:n,width:a}:{}}}),watch:{value:{immediate:!0,handler:"parseValue"}},methods:{parseValue:function(e){var t=[];this.multiple?t=e instanceof Array?e:(e||"").split(","):e&&(t=[e]),t.join(",")!==this.urls.map((function(e){return e.url})).join(",")&&(this.fileList=t.filter(Boolean).map((function(e){return{url:e,uid:e}})),this.urls=u.a.clone(this.fileList),console.log(this.urls))},emit:function(){var e=this.urls.map((function(e){return e.url})).filter(Boolean).join(",");this.$emit("input",e),this.$emit("change",e)},_onRemove:function(e,t){this.urls=this.urls.filter((function(t){return t.uid!=e.uid})),this.emit(),this.onRemove&&this.onRemove(e,this.urls)},httpRequest:function(e){var t=this;this.loading=!0,this.$service.common.ossUpload(e.file).then((function(i){var n={url:i,name:e.file.name,uid:e.file.uid};t.multiple?t.urls.push(n):t.urls=[n],t.emit(),t.onSuccess&&t.onSuccess(i,e.file,t.urls)}))["catch"]((function(i){console.error("upload error",i),t.$message.error(i),t.onError&&t.onError(i,e.file)})).done((function(){t.loading=!1}))},openSpace:function(){this.$refs["space"].open()},onSpaceConfirm:function(e){this.$emit("input",e),this.$emit("change",e)}}},d=c,p=(i("80cd"),i("2877")),f=Object(p["a"])(d,n,a,!1,null,"1d233e39",null);t["default"]=f.exports}}]);