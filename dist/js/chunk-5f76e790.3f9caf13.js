(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f76e790","chunk-d005ada4"],{"1db9":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("div",{staticStyle:{"max-width":"900px"}},[r("el-form-item",{attrs:{label:"客服二维码",prop:"qrCode"}},[r("cl-upload",{staticClass:"avatar-uploader",attrs:{value:e.ruleForm.qrCode,filePath:e.ruleForm.qrCode,size:[150,150],icon:"el-icon-plus",accept:"*","on-success":e.qrCodeUploadSuccess}}),r("span",{staticStyle:{color:"#909399"}},[e._v("注：限上传一张,建议图片大小150*150")])],1),r("el-form-item",{attrs:{label:"咨询文案",prop:"consultText"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",rows:6,maxlength:"800","show-word-limit":""},model:{value:e.ruleForm.consultText,callback:function(t){e.$set(e.ruleForm,"consultText",t)},expression:"ruleForm.consultText"}})],1),r("el-form-item",{attrs:{label:"状态"}},[r("el-switch",{attrs:{size:"large","active-text":"启用","inactive-text":"停用","active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm.enableStatus,callback:function(t){e.$set(e.ruleForm,"enableStatus",t)},expression:"ruleForm.enableStatus"}})],1),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)])},n=[],o=r("5530"),l=(r("96cf"),r("1da1")),i={data:function(){return{ruleForm:{qrCode:"",cusultText:"",enableStatus:0},rules:{qrCode:[{required:!0,message:"请上传客服二维码",trigger:"blur"}],cusultText:[{required:!0,message:"请输入咨询文案",trigger:"blur"}]}}},methods:{qrCodeUploadSuccess:function(e){e&&(this.ruleForm.qrCode=e)},getEditInfo:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$service.app.consult.info({id:e});case 3:a=r.sent,t.ruleForm=a,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.$message.error(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=13;break}return e.prev=1,a=Object(o["a"])({},t.ruleForm),e.next=5,t.$service.app.consult.add(a);case 5:t.$emit("update:addDialogShow",!1),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),t.$message.error(e.t0);case 11:e.next=15;break;case 13:return console.log("error submit!!"),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()}}},c=i,s=(r("8b56"),r("2877")),u=Object(s["a"])(c,a,n,!1,null,"71dfe9d9",null);t["default"]=u.exports},"8b56":function(e,t,r){"use strict";var a=r("fb42"),n=r.n(a);n.a},fb42:function(e,t,r){},ff43:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cl-crud",{ref:"crud",on:{load:e.onLoad}},[r("el-row",{attrs:{type:"flex",align:"middle"}},[r("cl-flex1"),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.addDialogTitle="新增咨询",e.addDialogShow=!0}}},[e._v("新增")])],1),r("el-row",[r("cl-table",{attrs:{columns:e.tableColumn},scopedSlots:e._u([{key:"column-qrCode",fn:function(e){var t=e.scope;return[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.qrCode,"preview-src-list":[t.row.qrCode]}})]}},{key:"column-enableStatus",fn:function(t){var a=t.scope;return[r("el-switch",{attrs:{size:"large","active-text":"启用","inactive-text":"停用","active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.updateTableRow(a.row)}},model:{value:a.row.enableStatus,callback:function(t){e.$set(a.row,"enableStatus",t)},expression:"scope.row.enableStatus"}})]}},{key:"column-op",fn:function(t){var a=t.scope;return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.editDialog(a.row.id)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteFn(a.row.id)}}},[e._v("删除")])]}}])})],1),r("el-row",{attrs:{type:"flex"}},[r("cl-flex1"),r("cl-pagination")],1),r("el-dialog",{attrs:{title:e.addDialogTitle,visible:e.addDialogShow,width:"800px"},on:{"update:visible":function(t){e.addDialogShow=t},close:e.addDialogClose}},[r("add-dialog",{ref:"editDialog",attrs:{addDialogShow:e.addDialogShow},on:{"update:addDialogShow":function(t){e.addDialogShow=t},"update:add-dialog-show":function(t){e.addDialogShow=t}}})],1)],1)},n=[],o=(r("96cf"),r("1da1")),l=r("1db9"),i={components:{addDialog:l["default"]},data:function(){return{addDialogShow:!1,addDialogTitle:"",serach:"",tableColumn:[{type:"index",label:"编号",align:"center",width:50},{label:"客服二维码",prop:"qrCode",align:"center"},{label:"咨询文案",prop:"consultText",align:"center"},{label:"状态",prop:"enableStatus",align:"center"},{label:"操作",prop:"op",align:"center"}]}},methods:{updateTableRow:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$service.app.consult.update(e);case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),t.$message.error(r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},editDialog:function(e){var t=this;this.addDialogTitle="编辑咨询信息",this.addDialogShow=!0,this.$nextTick((function(){t.$refs.editDialog.getEditInfo(e)}))},deleteFn:function(e){var t=this;this.$confirm("是否删除该条咨询?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$service.app.consult["delete"]({ids:e});case 3:return r.next=5,t.addDialogClose();case 5:t.$message({type:"success",message:"删除成功!"}),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),t.$message.error(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])}))))["catch"]((function(){t.$message({type:"info",message:"已取消删除"})}))},onLoad:function(e){var t=e.ctx,r=e.app;t.service(this.$service.app.consult).done(),r.refresh()},addDialogClose:function(){this.$refs.editDialog.resetForm("ruleForm"),this.$refs["crud"].refresh()}}},c=i,s=r("2877"),u=Object(s["a"])(c,a,n,!1,null,null,null);t["default"]=u.exports}}]);