(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4776538b"],{"158c":function(e,t,n){},b380:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cl-crud",{ref:"crud",on:{load:e.onLoad}},[n("el-row",{attrs:{type:"flex"}},[n("cl-refresh-btn"),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.$service.system.log.permission.clear,expression:"$service.system.log.permission.clear"}],attrs:{size:"mini",type:"danger"},on:{click:e.clear}},[e._v(" 清空 ")]),n("div",{staticClass:"keep-day"},[n("span",[e._v("日志保存天数")]),n("el-input-number",{attrs:{"controls-position":"right",size:"mini",max:1e4,min:1},on:{blur:e.saveDay},model:{value:e.day,callback:function(t){e.day=t},expression:"day"}})],1),n("cl-flex1"),n("cl-search-key",{attrs:{placeholder:"请输入请求地址, 参数，ip地址"}})],1),n("el-row",[n("cl-table",e._b({},"cl-table",e.table.props,!1))],1),n("el-row",{attrs:{type:"flex",justify:"end"}},[n("cl-pagination")],1)],1)},r=[],s=n("5530"),a=n("2f62"),c={data:function(){return{day:1,table:{props:{props:{"default-sort":{prop:"createTime",order:"descending"}},columns:[{type:"index",label:"#",align:"center",width:60},{prop:"userId",label:"用户ID",align:"center"},{prop:"name",label:"昵称",align:"center",minWidth:"150"},{prop:"action",label:"请求地址",align:"center",minWidth:"200","show-overflow-tooltip":!0},{prop:"params",label:"参数",align:"center",minWidth:"200","show-overflow-tooltip":!0},{prop:"ip",label:"ip",minWidth:"180",align:"center"},{prop:"ipAddr",label:"ip地址",minWidth:"150",align:"center"},{prop:"createTime",label:"创建时间",minWidth:"150",align:"center",sortable:!0}]}}}},computed:Object(s["a"])({},Object(a["b"])(["permission"])),created:function(){var e=this;this.$service.system.log.getKeep().then((function(t){e.day=t}))},methods:{onLoad:function(e){var t=e.ctx,n=e.app;t.service(this.$service.system.log).done(),n.refresh()},saveDay:function(){var e=this;this.$service.system.log.setKeep(this.day).then((function(){e.$message.success("保存成功")}))},clear:function(){var e=this;this.$confirm("是否要清空日志","提示",{type:"warning"}).then((function(){e.$service.system.log.clear().then((function(){e.$message.success("清空成功"),e.$refs["crud"].refresh()}))["catch"]((function(t){e.$message.error(t)}))}))["catch"]((function(){}))}}},o=c,l=(n("be34"),n("2877")),p=Object(l["a"])(o,i,r,!1,null,"77f9d0bc",null);t["default"]=p.exports},be34:function(e,t,n){"use strict";var i=n("158c"),r=n.n(i);r.a}}]);