(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1969c87a"],{c141:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cl-crud",{on:{load:e.onLoad}},[r("el-row",{attrs:{type:"flex",align:"middle"}},[r("h4",[e._v("积分设置")]),r("cl-flex1")],1),r("div",{staticClass:"flex items-center my-3"},[r("div",{staticClass:"w-32 text-right text-gray-700"},[e._v("积分抵扣比例：")]),r("div",{staticClass:"pl-5 text-gray-600 test-sm"},[e._v("注：抵扣比例×商品价格（或优惠价，不含运费）=抵扣金额")])]),r("div",{staticClass:"flex items-center my-3"},[r("div",{staticClass:"w-32 text-right text-gray-700"},[e._v("商城购物：")]),r("div",{staticClass:"pl-5 flex items-center"},[r("el-input",{staticClass:"w-10 mr-2",model:{value:e.globalConfig.scoreDeductionRatio,callback:function(t){e.$set(e.globalConfig,"scoreDeductionRatio",t)},expression:"globalConfig.scoreDeductionRatio"}}),e._v(" %")],1)]),r("div",{staticClass:"flex items-center my-3"},[r("div",{staticClass:"w-32 text-right text-gray-700"},[e._v("积分消耗比例：")]),r("div",{staticClass:"pl-5 text-gray-600 test-sm"},[e._v("注：抵扣金额÷消耗比例=消耗积分，积分取整")])]),r("div",{staticClass:"flex items-center my-3"},[r("div",{staticClass:"w-32 text-right text-gray-700"},[e._v("商城购物：")]),r("div",{staticClass:"pl-5 flex items-center"},[r("el-input",{staticClass:"w-10 mr-2",model:{value:e.globalConfig.scoreCostRatio,callback:function(t){e.$set(e.globalConfig,"scoreCostRatio",t)},expression:"globalConfig.scoreCostRatio"}}),e._v(" %")],1)]),r("div",{staticClass:"flex items-center my-3"},[r("div",{staticClass:"w-32 text-right text-gray-700"},[e._v("积分奖励比例：")]),r("div",{staticClass:"pl-5 text-gray-600 test-sm"},[e._v("注：奖励比例×商品价格（或优惠价，不含运费）=奖励积分，积分取整")])]),r("div",{staticClass:"flex items-center my-3"},[r("div",{staticClass:"w-32 text-right text-gray-700"},[e._v("商城购物：")]),r("div",{staticClass:"pl-5 flex items-center"},[r("el-input",{staticClass:"w-10 mr-2",model:{value:e.globalConfig.scoreRewardRatio,callback:function(t){e.$set(e.globalConfig,"scoreRewardRatio",t)},expression:"globalConfig.scoreRewardRatio"}}),e._v(" %")],1)]),r("el-row",{attrs:{type:"flex",align:"middle"}},[r("h4",[e._v("运费设置")]),r("el-button",{attrs:{small:""},on:{click:function(t){e.dialog=!0}}},[e._v("新增")]),r("cl-refresh-btn")],1),r("el-form",[r("el-form-item",{attrs:{label:"配送方式："}},[r("el-checkbox-group",{model:{value:e.deliveryMethod,callback:function(t){e.deliveryMethod=t},expression:"deliveryMethod"}},[r("el-checkbox",{attrs:{label:"0",name:"type"}},[e._v("普通快递")]),r("el-checkbox",{attrs:{label:"1",name:"type"}},[e._v("到店自提")])],1)],1)],1),r("el-row",[r("cl-table",{attrs:{props:{"span-method":e.objectSpanMethod},columns:e.tableColumn},scopedSlots:e._u([{key:"column-deliveryMethod",fn:function(t){var a=t.scope;return[r("span",[e._v(e._s(["快递","自提"][a.row.deliveryMethod]))])]}},{key:"column-deliveryChargeValue",fn:function(t){var a=t.scope;return[e.editing!=a.row?r("span",[e._v(e._s(a.row.deliveryChargeValue))]):r("span",[r("el-input",{attrs:{type:"number"},model:{value:a.row.deliveryChargeValue,callback:function(t){e.$set(a.row,"deliveryChargeValue",t)},expression:"scope.row.deliveryChargeValue"}})],1)]}},{key:"column-deliveryRegionName",fn:function(t){var a=t.scope;return[e.editing!=a.row?r("span",[e._v(e._s(a.row.deliveryRegionName))]):r("span",[r("el-input",{model:{value:a.row.deliveryRegionName,callback:function(t){e.$set(a.row,"deliveryRegionName",t)},expression:"scope.row.deliveryRegionName"}})],1)]}},{key:"column-deliveryRegion",fn:function(t){var a=t.scope;return[e.editing!=a.row?r("span",[e._v(e._s(a.row.deliveryRegion))]):r("span",[r("el-input",{model:{value:a.row.deliveryRegion,callback:function(t){e.$set(a.row,"deliveryRegion",t)},expression:"scope.row.deliveryRegion"}})],1)]}},{key:"column-op",fn:function(t){var a=t.scope;return[e.editing!=a.row?r("el-button",{attrs:{type:"text"},on:{click:function(t){e.editing=a.row}}},[e._v("修改")]):[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.update(a.row)}}},[e._v("确认")]),r("el-button",{attrs:{type:"text"},on:{click:function(t){e.editing=""}}},[e._v("取消")])]]}}])})],1),r("el-row",{attrs:{type:"flex"}},[r("el-button",{on:{click:e.updateGlobalConfig}},[e._v("确定")]),r("cl-flex1")],1),r("cl-dialog",{attrs:{visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{attrs:{"label-width":"100px"}},[r("el-form-item",{attrs:{label:"配送方式"}},[r("el-select",{model:{value:e.ruleForm.deliveryMethod,callback:function(t){e.$set(e.ruleForm,"deliveryMethod",t)},expression:"ruleForm.deliveryMethod"}},e._l([{text:"自提",value:"1"},{text:"快递",value:"0"}],(function(e){return r("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"配送名称"}},[r("el-input",{model:{value:e.ruleForm.deliveryRegionName,callback:function(t){e.$set(e.ruleForm,"deliveryRegionName",t)},expression:"ruleForm.deliveryRegionName"}})],1),r("el-form-item",{attrs:{label:"配送地,"}},[r("el-input",{model:{value:e.ruleForm.deliveryRegion,callback:function(t){e.$set(e.ruleForm,"deliveryRegion",t)},expression:"ruleForm.deliveryRegion"}})],1),r("el-form-item",{attrs:{label:"运费"}},[r("el-input",{model:{value:e.ruleForm.deliveryChargeValue,callback:function(t){e.$set(e.ruleForm,"deliveryChargeValue",t)},expression:"ruleForm.deliveryChargeValue"}})],1),r("el-button",{on:{click:e.add}},[e._v("确定")])],1)],1)],1)},l=[],o=(r("a15b"),r("ac1f"),r("1276"),r("5530")),n=(r("96cf"),r("1da1")),i={name:"deliverCharge",data:function(){return{dialog:!1,globalConfig:{scoreCostRatio:"",scoreRewardRatio:"",scoreDeductionRatio:"",deliveryMethod:""},deliveryMethod:[],editing:"",ruleForm:{deliveryRegionName:"",deliveryMethod:"0",deliveryRegion:"",deliveryChargeValue:0},tableColumn:[{label:"配送方式",prop:"deliveryMethod",align:"center"},{label:"配送名",prop:"deliveryRegionName",align:"center"},{label:"配送地",prop:"deliveryRegion",align:"center"},{label:"运费(元)",prop:"deliveryChargeValue",align:"center"},{label:"操作",width:200,prop:"op",align:"center"}]}},created:function(){this.getGlobalConfig()},methods:{objectSpanMethod:function(e){var t=e.row,r=(e.column,e.rowIndex,e.columnIndex);if(0===r&&35==t.deliveryMethod)return{rowspan:1,colspan:1}},getGlobalConfig:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$service.app.commodity.globalConfig.info();case 3:r=t.sent,Object.assign(e.globalConfig,r),e.deliveryMethod=r.deliveryMethod.split(","),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},updateGlobalConfig:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object.assign(e.globalConfig,{deliveryMethod:e.deliveryMethod.join(",")}),console.log(r),t.prev=2,t.next=5,e.$service.app.commodity.globalConfig.update(r);case 5:e.$message.success("修改成功"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),e.$message.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})))()},add:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$service.app.commodity.deliveryCharge.add(Object(o["a"])({},e.ruleForm));case 2:t.sent,e.dialog=!1;case 4:case"end":return t.stop()}}),t)})))()},update:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,t.$service.app.commodity.deliveryCharge.update(Object(o["a"])({},e));case 3:r.sent,t.editing="";case 5:case"end":return r.stop()}}),r)})))()},onLoad:function(e){var t=this,r=e.ctx,a=e.app;r.service({page:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$service.app.commodity.deliveryCharge.list();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}()}).done(),a.refresh()}}},s=i,c=(r("e2ae"),r("2877")),u=Object(c["a"])(s,a,l,!1,null,"2d6b6531",null);t["default"]=u.exports},cc5b:function(e,t,r){},e2ae:function(e,t,r){"use strict";var a=r("cc5b"),l=r.n(a);l.a}}]);