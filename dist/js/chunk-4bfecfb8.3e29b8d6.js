(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bfecfb8","chunk-2d2288b5"],{d6a3:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cl-crud",{ref:"crud",on:{load:e.onLoad}},[r("el-row",{attrs:{type:"flex",align:"middle"}},[r("cl-search-key",{attrs:{placeholder:"请输入商品名称"}}),r("cl-flex1"),r("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-setting"},on:{click:function(t){return e.$router.push({path:"DeliveryCharge"})}}},[e._v("全局设置")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$router.push({path:"ProductRelease"})}}},[e._v("发布商品")])],1),r("el-row",[r("cl-table",{attrs:{columns:e.tableColumn},scopedSlots:e._u([{key:"column-commodityCover",fn:function(e){var t=e.scope;return[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.commodityCover,"preview-src-list":[t.row.commodityCover]}})]}},{key:"column-fakeSalesVolume",fn:function(t){var o=t.scope;return[r("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"mini","controls-position":"right",min:0},on:{change:function(t){return e.updateFakeSaleVolume(o.row)}},model:{value:o.row.fakeSalesVolume,callback:function(t){e.$set(o.row,"fakeSalesVolume",t)},expression:"scope.row.fakeSalesVolume"}})]}},{key:"column-salesVolumeShow",fn:function(t){var o=t.scope;return[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"自定义","inactive-text":"真实"},on:{change:function(t){return e.updateShowSaleVolume(o.row)}},model:{value:o.row.salesVolumeShow,callback:function(t){e.$set(o.row,"salesVolumeShow",t)},expression:"scope.row.salesVolumeShow"}})]}},{key:"column-commodityStatus",fn:function(t){var o=t.scope;return[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"上架","inactive-text":"下架"},on:{change:function(t){return e.updateStatus(o.row)}},model:{value:o.row.commodityStatus,callback:function(t){e.$set(o.row,"commodityStatus",t)},expression:"scope.row.commodityStatus"}})]}},{key:"column-commodityOrder",fn:function(t){var o=t.scope;return[r("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"mini",min:1},on:{change:function(t){return e.updateCommodityOrder(o.row)}},model:{value:o.row.commodityOrder,callback:function(t){e.$set(o.row,"commodityOrder",t)},expression:"scope.row.commodityOrder"}})]}},{key:"column-op",fn:function(t){var o=t.scope;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){e.editing=o.row,e.$refs.editDialog.editDialog=!0},cacnel:function(t){e.editing=null}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteFn(o.row)}}},[e._v("删除")])]}}])})],1),r("el-row",{attrs:{type:"flex"}},[r("cl-flex1"),r("cl-pagination")],1),r("cl-form",{ref:"form"}),r("ProductEdit",{ref:"editDialog",attrs:{item:e.editing},on:{update:e.refresh}})],1)},n=[],a=(r("d81d"),r("a9e3"),r("d3b7"),r("96cf"),r("1da1")),c=r("da46"),i={components:{ProductEdit:function(){return Promise.all([r.e("chunk-2d0be333"),r.e("chunk-f28addf6")]).then(r.bind(null,"614e"))}},data:function(){return{tableColumn:[{type:"index",label:"编号",align:"center",width:50},{label:"商品封面",prop:"commodityCover",align:"center",width:125},{label:"商品名称",align:"center",prop:"commodityName"},{label:"商品类型",prop:"goodsType",filters:c["goodsTypeDict"],"filter-method":function(e,t,r){return-1!=e?t[r["property"]]===e:t[r["property"]]},formatter:function(e){var t="-";return c["goodsTypeDict"].map((function(r){(null===e||void 0===e?void 0:e.goodsType)==r.value&&(t=r.text)})),t},align:"center",width:105},{label:"真实销量",prop:"realSalesVolume",sortable:!0,align:"center",width:105},{label:"自定义销量",prop:"fakeSalesVolume",align:"center",width:125},{label:"销量展示",prop:"salesVolumeShow",align:"center",width:160},{label:"状态",prop:"commodityStatus",filters:[{value:0,text:"下架"},{value:1,text:"上架"}],"filter-method":function(e,t,r){return t[r["property"]]===e},align:"center",width:140},{label:"排序",prop:"commodityOrder",sortable:!0,align:"center",width:125},{label:"操作",prop:"op",align:"center",fixed:"right",width:120}],editing:null}},methods:{deleteFn:function(e){var t=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,o=e.id,n=e.goodsType,n=Number(n),0!=n){r.next=8;break}return r.next=6,t.$service.app.commodity.shopping["delete"]({ids:o});case 6:r.next=11;break;case 8:if(2!=n){r.next=11;break}return r.next=11,t.$service.app.commodity.score["delete"]({ids:o});case 11:t.$message({message:"删除成功",type:"success"}),t.$refs["crud"].refresh(),r.next=18;break;case 15:r.prev=15,r.t0=r["catch"](0),t.$message.error(r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,15]])}))))["catch"]((function(){t.$message({type:"info",message:"已取消删除"})}))},updateShowSaleVolume:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.prev=1,o=e.id,n=e.goodsType,a=e.salesVolumeShow,console.log(o),r.next=6,t.$service.app.commodity.common.updateShowSaleVolume({id:o,goodsType:n,salesVolumeShow:a});case 6:t.$message({message:"修改成功",type:"success"}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),t.$message.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},updateStatus:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.prev=1,o=e.id,n=e.goodsType,a=e.commodityStatus,console.log(o),r.next=6,t.$service.app.commodity.common.updateStatus({id:o,goodsType:n,commodityStatus:a});case 6:t.$message({message:"修改成功",type:"success"}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),t.$message.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},updateFakeSaleVolume:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.prev=1,o=e.id,n=e.goodsType,a=e.fakeSaleVolume,console.log(o),r.next=6,t.$service.app.commodity.common.updateFakeSaleVolume({id:o,goodsType:n,fakeSaleVolume:a});case 6:t.$message({message:"修改成功",type:"success"}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),t.$message.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},updateCommodityOrder:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.prev=1,o=e.id,n=e.goodsType,a=e.commodityOrder,console.log(o),r.next=6,t.$service.app.commodity.common.updateCommodityOrder({id:o,goodsType:n,commodityOrder:a});case 6:t.$message({message:"修改成功",type:"success"}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),t.$message.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},refresh:function(){this.$refs.crud.refresh({goodsType:-1,prop:"createTime",order:"desc"})},onLoad:function(e){var t=e.ctx,r=e.app;t.service(this.$service.app.commodity.common).done(),r.refresh({goodsType:-1,prop:"createTime",order:"desc"})}}},u=i,l=r("2877"),s=Object(l["a"])(u,o,n,!1,null,null,null);t["default"]=s.exports},da46:function(e,t,r){"use strict";r.r(t),r.d(t,"ticketPackageUserDict",(function(){return o})),r.d(t,"useCcertificationDict",(function(){return n})),r.d(t,"zhiyunCardStatusDict",(function(){return a})),r.d(t,"pointsUseDetailTypeDict",(function(){return c})),r.d(t,"goodsTypeDict",(function(){return i})),r.d(t,"orderTypeDict",(function(){return u})),r.d(t,"orderStatusDict",(function(){return l})),r.d(t,"couponTypeDict",(function(){return s})),r.d(t,"vipLevelDict",(function(){return d}));var o=[{value:0,text:"非套票"},{value:1,text:"基础套票"},{value:2,text:"普通套票"},{value:3,text:"亲子套票"},{value:4,text:"VIP套票"}],n=[{value:0,text:"未认证"},{value:1,text:"已认证"}],a=[{value:0,text:"非云卡用户"},{value:1,text:"云卡用户"}],c=[{value:1,text:"商城购物"},{value:2,text:"活动打卡"},{value:3,text:"套票充值"},{value:4,text:"远征观赛"},{value:5,text:"商城购物"},{value:6,text:"兑换礼品"}],i=[{value:-1,text:"全部"},{value:0,text:"商城商品"},{value:1,text:"票务商品"},{value:2,text:"积分商品"},{value:3,text:"活动商品"}],u=[{value:-1,text:"全部"},{value:0,text:"商城订单"},{value:2,text:"兑换订单"},{value:1,text:"票务订单"}],l=[{text:"全部",value:-1},{text:"待付款",value:0},{text:"待发货",value:1},{text:"待收货",value:2},{text:"发起退款",value:4},{text:"交易完成",value:3,type:"success"},{text:"已退款",value:5,type:"danger"},{text:"订单关闭",value:6,type:"danger"}],s=[{value:-1,text:"全部"},{value:0,text:"满减券"},{value:1,text:"立减券"},{value:2,text:"折扣券"}],d=[{value:0,text:"非会员"},{value:1,text:"白银"},{value:2,text:"白金"},{value:3,text:"钻石"},{value:4,text:"黑金"}]}}]);