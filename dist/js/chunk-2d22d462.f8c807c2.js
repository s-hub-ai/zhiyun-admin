(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d462"],{f794:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("cl-crud",{ref:"crud",attrs:{"on-refresh":e.onRefresh},on:{load:e.onLoad}},[t("el-row",{attrs:{type:"flex"}},[t("cl-refresh-btn"),t("cl-add-btn")],1),t("cl-table",e._g(e._b({ref:"table",scopedSlots:e._u([{key:"column-name",fn:function(n){var r=n.scope;return[t("span",[e._v(e._s(r.row.name))]),r.row.isShow?e._e():t("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",effect:"dark",type:"danger"}},[e._v("隐藏")])]}},{key:"column-icon",fn:function(e){var n=e.scope;return[t("icon-svg",{staticStyle:{"margin-top":"5px"},attrs:{name:n.row.icon,size:"16px"}})]}},{key:"column-perms",fn:function(n){var r=n.scope;return e._l(r.row.permList,(function(n,r){return t("el-tag",{key:r,staticStyle:{margin:"2px","letter-spacing":"0.5px"},attrs:{size:"mini",effect:"dark"}},[e._v(e._s(n))])}))}},{key:"column-router",fn:function(n){var r=n.scope;return[1==r.row.type?t("el-link",{attrs:{type:"primary",href:r.row.router}},[e._v(e._s(r.row.router))]):t("span",[e._v(e._s(r.row.router))])]}},{key:"column-keepAlive",fn:function(n){var r=n.scope;return[1==r.row.type?[r.row.keepAlive?t("i",{staticClass:"el-icon-check"}):t("i",{staticClass:"el-icon-close"})]:e._e()]}},{key:"slot-add",fn:function(n){var r=n.scope;return[2!=r.row.type?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.upsertAppend(r.row)}}},[e._v("新增")]):e._e()]}}])},"cl-table",e.table.props,!1),e.table.on)),t("cl-upsert",e._b({ref:"upsert",on:{open:e.onUpsertOpen}},"cl-upsert",e.upsert.props,!1))],1),t("cl-context-menu",{ref:"context-menu"})],1)},o=[],l=(t("d81d"),t("ac1f"),t("1276"),t("8bc2")),p={data:function(){var e=this;return{table:{props:{props:{"row-key":"id"},columns:[{prop:"name",label:"名称",width:200},{prop:"icon",label:"图标",align:"center",width:80},{prop:"type",label:"类型",align:"center",width:100,dict:[{label:"目录",value:0},{label:"菜单",value:1},{label:"权限",value:2}]},{prop:"router",label:"节点路由",align:"center","min-width":160},{prop:"keepAlive",label:"路由缓存",align:"center",width:100},{prop:"viewPath",label:"文件路径",align:"center","min-width":200,"show-overflow-tooltip":!0},{prop:"perms",label:"权限","header-align":"center","min-width":300},{prop:"orderNum",label:"排序号",align:"center",width:90},{prop:"updateTime",label:"更新时间",align:"center",sortable:!0,width:180},{label:"操作",align:"center",type:"op",layout:["slot-add","edit","delete"]}]},on:{"row-click":this.onRowClick,"row-contextmenu":this.onRowContextMenu}},upsert:{props:{props:{width:"800px"},items:[{prop:"type",value:0,label:"节点类型",span:24,component:{name:"el-radio-group",options:[{label:"目录",value:0},{label:"菜单",value:1},{label:"权限",value:2}],on:{change:function(n){e.changeType(n)}}}},{prop:"name",label:"节点名称",span:24,component:{name:"el-input",attrs:{placeholder:"请输入节点名称"}},rules:{required:!0,message:"名称不能为空"}},{prop:"parentId",label:"上级节点",span:24,component:{name:"cl-menu-tree"}},{prop:"router",label:"节点路由",span:24,hidden:!0,component:{name:"el-input",attrs:{placeholder:"请输入节点路由"}}},{prop:"keepAlive",value:!0,label:"路由缓存",span:24,component:{name:"el-radio-group",options:[{label:"开启",value:!0},{label:"关闭",value:!1}]}},{prop:"isShow",label:"是否显示",span:24,value:!0,hidden:!1,component:{name:"el-switch"}},{prop:"viewPath",label:"文件路径",span:24,hidden:!0,component:{name:"cl-menu-file-path"}},{prop:"icon",label:"节点图标",span:24,component:{name:"cl-menu-icons"}},{prop:"orderNum",label:"排序号",span:24,component:{name:"el-input-number",props:{placeholder:"请填写排序号",min:0,max:99,"controls-position":"right"}}},{prop:"perms",label:"权限",span:24,hidden:!0,component:{name:"cl-menu-perms"}}]}}}},methods:{onLoad:function(e){var n=e.ctx,t=e.app;n.service(this.$service.system.menu).set("dict",{api:{page:"list"}}).done(),t.refresh()},onRefresh:function(e,n){n.next;var t=n.render;this.$service.system.menu.list().then((function(e){e.map((function(e){e.permList=e.perms?e.perms.split(","):[]})),t(Object(l["deepTree"])(e))}))},onRowClick:function(e,n){n.property&&e.children&&this.$refs["table"].toggleRowExpansion(e)},onRowContextMenu:function(e,n,t){var r=this,o=this.$refs["crud"],l=o.rowEdit,p=o.rowDelete,a=[{label:"编辑",callback:function(n,t){l(e),t()}},{label:"删除",callback:function(n,t){p(e),t()}}];2!=e.type&&a.unshift({label:"新增",callback:function(n,t){r.upsertAppend(e),t()}}),1==e.type&&a.push({label:"权限",callback:function(n,t){r.setPermission(e),t()}}),this.$refs["context-menu"].open(t,{list:a}),t.preventDefault()},onUpsertOpen:function(e,n){this.changeType(n?n.type:0)},upsertAppend:function(e){var n=e.type,t=e.id;this.$refs["crud"].rowAppend({parentId:t,type:n+1})},changeType:function(e){var n=this.$refs["upsert"].toggleItem;n("router",1==e),n("viewPath",1==e),n("keepAlive",1==e),n("icon",2!=e),n("perms",2==e),n("isShow",2!=e)},setPermission:function(e){var n=e.id;this.$refs["crud"].rowAppend({parentId:n,type:2})},toUrl:function(e){this.$router.push(e)}}},a=p,i=t("2877"),s=Object(i["a"])(a,r,o,!1,null,null,null);n["default"]=s.exports}}]);