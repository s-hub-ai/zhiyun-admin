(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdd7974a","chunk-4fa787a0"],{"631f":function(e,t,r){"use strict";var a=r("b167"),n=r.n(a);n.a},b167:function(e,t,r){},d7c7:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("div",{staticStyle:{"max-width":"500px"}},[r("el-form-item",{attrs:{label:"球迷会名称",prop:"fanClubName"}},[r("el-input",{attrs:{placeholder:"请输入球迷会的名称"},model:{value:e.ruleForm.fanClubName,callback:function(t){e.$set(e.ruleForm,"fanClubName",t)},expression:"ruleForm.fanClubName"}})],1),r("el-form-item",{staticClass:"form-item",attrs:{prop:"fanClubRegion",label:"区域"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.fanClubRegion,callback:function(t){e.$set(e.ruleForm,"fanClubRegion",t)},expression:"ruleForm.fanClubRegion"}},e._l(e.fanClubRegionList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.regionName,value:e.id}})})),1)],1),r("el-form-item",{staticClass:"form-item",attrs:{label:"负责人",prop:"personLiable"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入负责人姓名"},model:{value:e.ruleForm.personLiable,callback:function(t){e.$set(e.ruleForm,"personLiable",t)},expression:"ruleForm.personLiable"}})],1),r("el-form-item",{staticClass:"form-item",attrs:{label:"手机号",prop:"phoneNum"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入负责人手机号",maxlength:"11"},model:{value:e.ruleForm.phoneNum,callback:function(t){e.$set(e.ruleForm,"phoneNum",t)},expression:"ruleForm.phoneNum"}})],1),r("el-form-item",{attrs:{label:"球迷会封面",prop:"fanClubCover"}},[r("cl-upload",{staticClass:"avatar-uploader",attrs:{multiple:"",limit:5,value:e.ruleForm.fanClubCover,size:[150,150],icon:"el-icon-plus",accept:"*","on-success":e.fanClubCoverUploadSuccess}})],1),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)])},n=[],l=r("5530"),o=(r("96cf"),r("1da1")),i={computed:{fanClubRegionList:function(){return this.$store.state.common.fanClubRegion}},data:function(){return{ruleForm:{fanClubName:"",fanClubRegion:"",personLiable:"",phoneNum:"",fanClubCover:""},rules:{fanClubName:[{required:!0,message:"请输入球迷会名称",trigger:"blur"}],fanClubRegion:[{required:!0,message:"请选择区域",trigger:"change"}],personLiable:[{required:!0,message:"请填写负责人",trigger:"blur"}],phoneNum:[{required:!0,message:"请填写负责人手机号",trigger:"blur"}],fanClubCover:[{required:!0,message:"请上传球迷会封面",trigger:"blur"}]}}},created:function(){},methods:{getEditInfo:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$service.app.fanClub.info({id:e});case 3:a=r.sent,t.ruleForm=a,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.$message.error(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},fanClubCoverUploadSuccess:function(e){e&&(this.ruleForm.fanClubCover=e)},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=13;break}return e.prev=1,a=Object(l["a"])({},t.ruleForm),e.next=5,t.$service.app.fanClub.add(a);case 5:t.$emit("update:addDialogShow",!1),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),t.$message.error(e.t0);case 11:e.next=15;break;case 13:return console.log("error submit!!"),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()}}},u=i,s=(r("631f"),r("2877")),c=Object(s["a"])(u,a,n,!1,null,"20217f54",null);t["default"]=c.exports},f6b2:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cl-crud",{ref:"crud",on:{load:e.onLoad}},[r("el-row",{attrs:{type:"flex",align:"middle"}},[r("cl-search-key",{attrs:{placeholder:"请输入球迷会名称"}}),r("cl-flex1"),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.addDialogTitle="新增球迷会",e.addDialogShow=!0}}},[e._v("新增球迷会")])],1),r("el-row",[r("cl-table",{attrs:{columns:e.tableColumn},scopedSlots:e._u([{key:"column-fanClubCover",fn:function(e){var t=e.scope;return[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.fanClubCover,"preview-src-list":t.row.fanClubCover}})]}},{key:"column-peopleNum",fn:function(t){var a=t.scope;return[r("span",[e._v(e._s(a.row.userList.length))])]}},{key:"column-op",fn:function(t){var a=t.scope;return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.editDialog(a.row.id)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteFn(a.row.id)}}},[e._v("删除")])]}}])})],1),r("el-row",{attrs:{type:"flex"}},[r("cl-flex1"),r("cl-pagination")],1),r("el-dialog",{attrs:{title:e.addDialogTitle,visible:e.addDialogShow,width:"400px"},on:{"update:visible":function(t){e.addDialogShow=t},close:e.addDialogClose}},[r("add-dialog",{ref:"editDialog",attrs:{addDialogShow:e.addDialogShow},on:{"update:addDialogShow":function(t){e.addDialogShow=t},"update:add-dialog-show":function(t){e.addDialogShow=t}}})],1)],1)},n=[],l=(r("d81d"),r("96cf"),r("1da1")),o=r("d7c7"),i={components:{addDialog:o["default"]},computed:{fanClubRegionList:function(){return this.$store.state.common.fanClubRegion}},data:function(){var e=this;return{addDialogShow:!1,addDialogTitle:"",tableColumn:[{type:"index",label:"编号",align:"center",width:50},{label:"球迷会封面",prop:"fanClubCover",align:"center"},{label:"球迷会名称",prop:"fanClubName",align:"center"},{label:"区域",prop:"fanClubRegion",align:"center",formatter:function(t){var r="-";return e.fanClubRegionList.map((function(e){t.fanClubRegion==e.id&&(r=e.regionName)})),r}},{label:"负责人",prop:"personLiable",align:"center"},{label:"手机号",prop:"phoneNum",align:"center"},{label:"成员人数",prop:"peopleNum",sortable:!0,align:"center"},{label:"积分排名",prop:"pointsOrder",sortable:!0,align:"center"},{label:"操作",prop:"op",align:"center"}]}},methods:{editDialog:function(e){var t=this;this.addDialogTitle="编辑球迷会",this.addDialogShow=!0,this.$nextTick((function(){t.$refs.editDialog.getEditInfo(e)}))},deleteFn:function(e){var t=this;this.$confirm("是否删除该球迷会?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$service.app.fanClub["delete"]({ids:e});case 3:return r.next=5,t.addDialogClose();case 5:t.$message({type:"success",message:"删除成功!"}),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),t.$message.error(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])}))))["catch"]((function(){t.$message({type:"info",message:"已取消删除"})}))},onLoad:function(e){var t=e.ctx,r=e.app;t.service(this.$service.app.fanClub).done(),r.refresh()},addDialogClose:function(){this.$refs.editDialog.resetForm("ruleForm"),this.$refs.editDialog.ruleForm={},this.$refs["crud"].refresh()}}},u=i,s=r("2877"),c=Object(s["a"])(u,a,n,!1,null,null,null);t["default"]=c.exports}}]);